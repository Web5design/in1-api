{"ts":1376130934479,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1376130954057,"patch":[[{"diffs":[[1,"This is an API entrypoint."]],"start1":0,"start2":0,"length1":0,"length2":26}]],"length":26,"saved":false}
{"ts":1376131090060,"patch":[[{"diffs":[[0,"his is a"],[-1,"n"],[1," social and content"],[0," API ent"]],"start1":1,"start2":1,"length1":17,"length2":35}]],"length":44,"saved":false}
{"ts":1376232157525,"patch":[[{"diffs":[[0,"rypoint."],[1,"\n\n\n\n<form action=\"/fetch\" method=\"POST\">\n    <input type=\"checkbox\" id=\"urls\" name=\"urls\" value=\"<%=thisUrl%>\">\n    \n    <button type=\"submit\">OK</button>\n</form>"]],"start1":36,"start2":36,"length1":8,"length2":170}]],"length":206,"saved":false}
{"ts":1376232169620,"patch":[[{"diffs":[[0,"point.\n\n"],[-1,"\n\n"],[0,"<form ac"]],"start1":38,"start2":38,"length1":18,"length2":16}]],"length":204,"saved":false}
{"ts":1376232346974,"patch":[[{"diffs":[[0,"\"POST\">\n"],[1,"    <%for (var i=0;i<results.length;i++) {%>\n"],[0,"    <inp"]],"start1":75,"start2":75,"length1":16,"length2":61},{"diffs":[[0,"\"<%="],[-1,"thisU"],[1,"results[i].u"],[0,"rl%>"]],"start1":183,"start2":183,"length1":13,"length2":20},{"diffs":[[0,">\">\n    "],[1,"<%}%>"],[0,"\n    <bu"]],"start1":202,"start2":202,"length1":16,"length2":21}]],"length":261,"saved":false}
{"ts":1376232473886,"patch":[[{"diffs":[[0,".url%>\">"],[1,"<%=results[i].url%><br>"],[0,"\n    <%}"]],"start1":197,"start2":197,"length1":16,"length2":39}]],"length":284,"saved":false}
{"contributors":[],"silentsave":false,"ts":1377259497928,"patch":[[{"diffs":[[-1,"This is a social and content API entrypoint.\n\n<form action=\"/fetch\" method=\"POST\">\n    <%for (var i=0;i<results.length;i++) {%>\n    <input type=\"checkbox\" id=\"urls\" name=\"urls\" value=\"<%=results[i].url%>\"><%=results[i].url%><br>\n    <%}%>\n    <button type=\"submit\">OK</button>\n</form"],[1,"<script>\n$(document).ready(function(){\n    $('#btnGet').click(function(e){\n        $.ajax({\n            url: \"posts\",\n            type: \"get\",\n            success: function (data) {\n                if (typeof data.error!=\"undefined\") {\n                    alert(data.error);\n                    $('#btnFork').button(\"reset\");\n                } else {\n                    var results = data.results;\n                    for(var i=0; i<results.length; ++i) {\n                        var cont = $(\"<div class='col-9'><b>\"+results[i].title+\"</b>\"+results[i].desc+\"</div>\");\n                        if (results[i].images && results[i].images.length>0) {\n                            $(\"<div class='col-3'><a href='\"+results[i].url+\"'><img src='\"+results[i].images[0]+\"' class='img-responsive'></a></div>\").appendTo('#posts');\n                        }\n                        else {\n                            $(\"<div class='col-3'></div>\").appendTo('#posts');\n                        }\n                        cont.appendTo(\"#posts\");\n                    }\n                }\n            },\n            error: function (e) {console.log('error:'+e);$('#btnFork').button(\"reset\");}\n        });\n    });\n    \n    $('#btnFeed').click(function(e){\n        var lastId = $('#lastId').val();\n        $.ajax({\n            url: \"/feed?format=json&lastId=\"+lastId,\n            type: \"get\",\n            success: function (data) {\n                if (typeof data.error!=\"undefined\") {\n                    alert(data.error);\n                } else {\n                    var results = data.results;\n                    console.log(results);\n                    if (results.length>0) {\n                        for (var i=0;i<results.length-1;i++) { // lastId (since_id) is included in results\n                            var tr = $(\"<tr></tr>\");\n                            $('<td>'+results[i].account+'</td>').appendTo(tr);\n                            $('<td><input type=\"checkbox\" id=\"urls\" name=\"urls\" value=\"'+results[i].url+'\"></td>').appendTo(tr);\n                            $('<td>'+results[i].url+'</td>').appendTo(tr);\n                            $('<td>'+results[i].text+'</td>').appendTo(tr);\n                            tr.prependTo(\"#tblFeed tbody\");\n                        }\n                        $('#lastId').val(results[0].id);\n                    }\n                    else {\n                        alert(\"No new updates!\");\n                    }\n                }\n                \n            },\n            error: function (e) {console.log('error:'+e); $('#btnFork').button(\"reset\");}\n        });\n    });\n});\n</script>\n<div class=\"container\">\n    \n    <h2>Feed</h2>\n    <form action=\"/fetch\" method=\"POST\">\n        <table class=\"table table-striped\" id=\"tblFeed\">\n            <thead>\n            <tr>\n                <th>Source</th>\n                <th></th>\n                <th>Url</th>\n                <th>Text</th>\n            </tr>\n            </thead>\n            <tbody>\n            <%for (var i=0;i<results.length;i++) {%>\n            <tr id=\"trFeed\">\n                <td><%=results[i].account%></td>\n                <td><input type=\"checkbox\" id=\"urls\" name=\"urls\" <%if(typeof results[i].exists!=\"undefined\" && results[i].exists===\"1\"){%>checked<%}%> value=\"<%=results[i].url%>\"></td>\n                <td><%=results[i].url%></td>\n                <td><%=results[i].text%></td>\n            </tr>\n            <%}%>\n            </tbody>\n        </table>\n        <input type=hidden name=\"lastId\" id=\"lastId\" value=\"<%=results[0].id%>\">\n        <button type=\"submit\" class=\"btn btn-default\">Save</button>  <button type=\"button\" id=\"btnFeed\" class=\"btn btn-default\">Refresh Feed</button>\n    </form>\n    \n    \n    <hr>\n    <button type=\"button\" id=\"btnGet\">Get Posts</button>\n    \n    <h2>Posts</h2>\n    \n    <%for (var i=0;i<posts.length;i++) {%>\n    <div class=\"row\">\n        <div class=\"col-2\">\n            <a href=\"<%=posts[i].url%>\"><img src=\"<%=posts[i].images[0]%>\" class=\"img-responsive\"></a>\n        </div>\n        <div class=\"col-10\">\n            <h4><%=posts[i].title%></h4>\n            <%=posts[i].desc%>\n        </div>\n    </div>\n    <%}%>\n    \n    <hr>\n    \n    <a href=\"#modalSource\" class=\"btn btn-primary\" data-toggle=\"modal\">Source</a>\n    \n</div>\n\n<div id=\"modalSource\" class=\"modal\">\n    <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n        <div class=\"modal-header\">\n            <a href=\"#\" data-dismiss=\"modal\" aria-hidden=\"true\" class=\"close\">Ã—</a>\n            <h3>Source</h3>\n            <p>add a new feed</p>\n        </div>\n        <div class=\"modal-body\">\n              <form class=\"form form-horizontal\" id=\"formSource\">\n                  <div class=\"control-group\">\n                      <label class=\"control-label\">Home page</label>\n                      <div class=\"controls\">\n                          <input type=\"text\" name=\"urlHome\" id=\"urlHome\" placeholder=\"http://\" class=\"form-control\">\n                      </div>\n                  </div>\n                  <div class=\"control-group\">\n                      <label class=\"control-label\">Name</label>\n                      <div class=\"controls\">\n                          <input type=\"text\" name=\"sourceName\" id=\"sourceName\" placeholder=\"Name / title\" class=\"form-control\">\n                      </div>\n                  </div>\n                  <div class=\"control-group\">\n                      <label class=\"control-label\">Description</label>\n                      <div class=\"controls\">\n                          <textarea name=\"sourceDesc\" rows=\"4\" id=\"sourceDesc\" placeholder=\"Description\"  class=\"form-control\"></textarea>\n                      </div>\n                  </div>\n                  <div class=\"control-group\">\n                      <label class=\"control-label\">Logo</label>\n                      <div class=\"controls\">\n                          <input type=\"text\" name=\"logoSmall\" id=\"logoSmall\" placeholder=\"\" class=\"form-control\">\n                      </div>\n                  </div>\n                  <div class=\"control-group\">\n                      <label class=\"control-label\">Tags</label>\n                      <div class=\"controls\">\n                          <input type=\"text\" name=\"sourceTags\" id=\"sourceTags\" placeholder=\"tag1,tag2,tag3\" class=\"form-control\">\n                      </div>\n                  </div>\n              </form>\n        </div>\n        <div class=\"modal-footer pull-center\">\n            <a href=\"#\" data-dismiss=\"modal\" aria-hidden=\"true\" class=\"btn\">Cancel</a>     \n            <a href=\"#\" data-dismiss=\"modal\" aria-hidden=\"true\" id=\"btnSource\" role=\"button\" class=\"btn btn-success\">Save</a>\n        </div>\n    </div>\n    </div>\n</div"],[0,">"]],"start1":0,"start2":0,"length1":284,"length2":6695}]],"length":6695,"saved":false}
{"ts":1377259524964,"patch":[[{"diffs":[[0,"tion(){\n"],[1,"\n    \n\n"],[0,"    $('#"]],"start1":31,"start2":31,"length1":16,"length2":23}]],"length":6702,"saved":false}
{"ts":1377259576372,"patch":[[{"diffs":[[0,"h>Text</th>\n"],[1,"                <th>Images</th>\n"],[0,"            "]],"start1":2915,"start2":2915,"length1":24,"length2":56},{"diffs":[[0,"td><"],[-1,"%=results[i].text%"],[1,"a href=\"#\" id=\"btnImage\">image</a"],[0,"></t"]],"start1":3396,"start2":3396,"length1":26,"length2":41}]],"length":6749,"saved":false}
{"ts":1377259615375,"patch":[[{"diffs":[[0,"\"#\" "],[-1,"id=\"btnImage"],[1,"class=\"loadImage\" data-url=\"<%=results[i].url%>"],[0,"\">im"]],"start1":3407,"start2":3407,"length1":20,"length2":55}]],"length":6784,"saved":false}
{"ts":1377259764931,"patch":[[{"diffs":[[0,"ion(){\n\n"],[1,"\n"],[0,"    "],[1,"$('#loadImage').click(function(){\n    \n        var thisUrl = $(this).attr(\"data-url\");\n        $.ajax({\n            url: \"/harvestImages?url=\"+thisUrl,\n            type: \"get\",\n            success: function (data) {\n                if (typeof data.error!=\"undefined\") {\n                    alert(data.error);\n                    \n                } else {\n                    \n                }\n            },\n            error: function (e) {console.log('error:'+e);$('#btnFork').button(\"reset\");}\n        });\n    \n    });"],[0,"\n\n    $("]],"start1":32,"start2":32,"length1":20,"length2":543}]],"length":7307,"saved":false}
{"ts":1377259769973,"patch":[[{"diffs":[[0,"+e);"],[-1,"$('#btnFork').button(\"reset\");"],[0,"}\n  "]],"start1":507,"start2":507,"length1":38,"length2":8}]],"length":7277,"saved":false}
{"ts":1377259800420,"patch":[[{"diffs":[[0,").appendTo(tr);\n"],[1,"                            $('<td>image</td>').appendTo(tr);\n"],[0,"                "]],"start1":2667,"start2":2667,"length1":32,"length2":94}]],"length":7339,"saved":false}
{"ts":1377259838445,"patch":[[{"diffs":[[0,"age</a><"],[1,"div class=\"imageCont\"></div><"],[0,"/td>\n   "]],"start1":4017,"start2":4017,"length1":16,"length2":45}]],"length":7368,"saved":false}
{"ts":1377259840563,"patch":[[{"diffs":[[0,"mageCont"],[1,"ainer"],[0,"\"></div>"]],"start1":4037,"start2":4037,"length1":16,"length2":21}]],"length":7373,"saved":false}
{"ts":1377259848640,"patch":[[{"diffs":[[0,"mage"],[-1,"Container"],[1,"Preview"],[0,"\"></"]],"start1":4037,"start2":4037,"length1":17,"length2":15}]],"length":7371,"saved":false}
{"ts":1377259915290,"patch":[[{"diffs":[[0,"                "],[1,"$('<img src=\"'+data.image+'\" >').appendTo('#imagePreview');"],[0,"\n               "]],"start1":404,"start2":404,"length1":32,"length2":91}]],"length":7430,"saved":false}
{"ts":1377259924354,"patch":[[{"diffs":[[0,"          } else"],[1," if (data.image)"],[0," {\n             "]],"start1":381,"start2":381,"length1":32,"length2":48}]],"length":7446,"saved":false}
{"ts":1377260076012,"patch":[[{"diffs":[[0,"s[i].url%></td>\n"],[1,"                <td><%=results[i].text%></td>\n"],[0,"                "]],"start1":3993,"start2":3993,"length1":32,"length2":78}]],"length":7492,"saved":false}
{"ts":1377260096683,"patch":[[{"diffs":[[0,"pendTo('"],[-1,"#"],[1,"."],[0,"imagePre"]],"start1":471,"start2":471,"length1":17,"length2":17}]],"length":7492,"saved":false}
{"ts":1377260271732,"patch":[[{"diffs":[[0,"data-url\");\n"],[1,"        var imageContainer = $(this).next('.imagePreview');\n"],[0,"        $.aj"]],"start1":120,"start2":120,"length1":24,"length2":84},{"diffs":[[0,"ppendTo("],[-1,"'."],[0,"image"],[-1,"Preview'"],[1,"Container"],[0,");\n     "]],"start1":530,"start2":530,"length1":31,"length2":30}]],"length":7551,"saved":false}
{"ts":1377260287249,"patch":[[{"diffs":[[0,"ePreview');\n"],[1,"        imageContainer.html(\"...\");\n"],[0,"        $.aj"]],"start1":180,"start2":180,"length1":24,"length2":60}]],"length":7587,"saved":false}
{"ts":1377260390615,"patch":[[{"diffs":[[0,"\n    $('"],[-1,"#"],[1,"."],[0,"loadImag"]],"start1":40,"start2":40,"length1":17,"length2":17}]],"length":7587,"saved":false}
{"ts":1377260543651,"patch":[[{"diffs":[[0,"mage+'\" "],[1,"class=\"img-responsive\" width=\"150\""],[0,">').appe"]],"start1":553,"start2":553,"length1":16,"length2":50}]],"length":7621,"saved":false}
{"ts":1377260606836,"patch":[[{"diffs":[[0,"       }"],[-1," else"],[1,"\n                if (data.image) {\n                    $('<img src=\"'+data.image+'\" class=\"img-responsive\" width=\"150\">').appendTo(imageContainer);\n                }\n               "],[0," if (dat"]],"start1":480,"start2":480,"length1":21,"length2":197},{"diffs":[[0,"  if (data.image"],[1,"s"],[0,") {\n            "]],"start1":668,"start2":668,"length1":32,"length2":33},{"diffs":[[0,"rc=\"'+data.image"],[1,"s[0]"],[0,"+'\" class=\"img-r"]],"start1":718,"start2":718,"length1":32,"length2":36}]],"length":7802,"saved":false}
{"ts":1377260637137,"patch":[[{"diffs":[[0,"ive\" width=\"150\""],[1," title=\"meta image\""],[0,">').appendTo(ima"]],"start1":590,"start2":590,"length1":32,"length2":51},{"diffs":[[0,"th=\"150\""],[1," title=\"first image\""],[0,">').appe"]],"start1":787,"start2":787,"length1":16,"length2":36}]],"length":7841,"saved":false}
{"ts":1377260865397,"patch":[[{"diffs":[[0,"   <th>T"],[1,"we"],[0,"e"],[-1,"x"],[0,"t</th>\n "]],"start1":3889,"start2":3889,"length1":18,"length2":19}]],"length":7842,"saved":false}
{"ts":1377261008818,"patch":[[{"diffs":[[0,"a.images"],[1," && data.images.length>0"],[0,") {\n    "]],"start1":696,"start2":696,"length1":16,"length2":40}]],"length":7866,"saved":false}
{"ts":1377262097203,"patch":[[{"diffs":[[0,"   });\n    \n"],[1,"        return false;\n    \n"],[0,"    });\n\n   "]],"start1":966,"start2":966,"length1":24,"length2":51}]],"length":7893,"saved":false}
{"ts":1377262100861,"patch":[[{"diffs":[[0,"        });\n"],[-1,"    \n"],[0,"        retu"]],"start1":961,"start2":961,"length1":29,"length2":24},{"diffs":[[0," false;\n"],[-1,"    \n"],[0,"    });\n"]],"start1":987,"start2":987,"length1":21,"length2":16}]],"length":7883,"saved":false}
{"ts":1377263689114,"patch":[[{"diffs":[[0,".error);"],[-1,"\n                  "],[0,"  \n     "]],"start1":441,"start2":441,"length1":35,"length2":16}]],"length":7864,"saved":false}
{"ts":1377263783687,"patch":[[{"diffs":[[0,"a image\">')."],[-1,"appendTo"],[1,"html"],[0,"(imageContai"]],"start1":598,"start2":598,"length1":32,"length2":28},{"diffs":[[0,"age\">')."],[-1,"appendTo"],[1,"html"],[0,"(imageCo"]],"start1":812,"start2":812,"length1":24,"length2":20}]],"length":7856,"saved":false}
{"ts":1377263833174,"patch":[[{"diffs":[[0,"image+'\" class=\""],[1,"img-thumbnail "],[0,"img-responsive\" "]],"start1":544,"start2":544,"length1":32,"length2":46},{"diffs":[[0,"es[0]+'\" class=\""],[1,"img-thumbnail "],[0,"img-responsive\" "]],"start1":767,"start2":767,"length1":32,"length2":46}]],"length":7884,"saved":false}
{"ts":1377263883843,"patch":[[{"diffs":[[0,"            $('<"],[1,"input type=\"checkbox\" name=\"imgSrc\" value=\"'+data.image+'\"><"],[0,"img src=\"'+data."]],"start1":512,"start2":512,"length1":32,"length2":92},{"diffs":[[0,"    $('<"],[1,"input type=\"checkbox\" name=\"imgSrc\" value=\"'+data.image+'\"><"],[0,"img src="]],"start1":799,"start2":799,"length1":16,"length2":76}]],"length":8004,"saved":false}
{"ts":1377264320149,"patch":[[{"diffs":[[0,"\"meta image\">')."],[-1,"html"],[1,"appendTo"],[0,"(imageContainer)"]],"start1":668,"start2":668,"length1":36,"length2":40},{"diffs":[[0,"age\">')."],[-1,"html"],[1,"appendTo"],[0,"(imageCo"]],"start1":964,"start2":964,"length1":20,"length2":24}]],"length":8012,"saved":false}
{"ts":1377264336266,"patch":[[{"diffs":[[0,"nction (data) {\n"],[1,"                imageContainer.empty();\n"],[0,"                "]],"start1":341,"start2":341,"length1":32,"length2":72}]],"length":8052,"saved":false}
{"ts":1377269949538,"patch":[[{"diffs":[[0,"     <td><input "],[1,"type=\"hidden\" value=\"item<%=i%>\"><input "],[0,"type=\"checkbox\" "]],"start1":4350,"start2":4350,"length1":32,"length2":72}]],"length":8092,"saved":false}
{"ts":1377270051734,"patch":[[{"diffs":[[0,"put "],[-1,"type=\"hidden\" value=\"item<%=i%>\"><input "],[0,"type"]],"start1":4362,"start2":4362,"length1":48,"length2":8}]],"length":8052,"saved":false}
{"ts":1377270195291,"patch":[[{"diffs":[[0,"ox\" id=\""],[-1,"urls\" name=\"urls"],[1,"item<%=i%>\" name=\"item<%=i%>"],[0,"\" <%if(t"]],"start1":4378,"start2":4378,"length1":32,"length2":44},{"diffs":[[0,"i].url%>"],[-1,"\""],[1," /"],[0,"></td>\n "]],"start1":4520,"start2":4520,"length1":17,"length2":18}]],"length":8065,"saved":false}
{"ts":1377270197307,"patch":[[{"diffs":[[0,"i].url%>"],[1,"\""],[0," /></td>"]],"start1":4520,"start2":4520,"length1":16,"length2":17}]],"length":8066,"saved":false}
{"ts":1377270251621,"patch":[[{"diffs":[[0,"adImage\""],[1," data-item=\"item<%=i%>\""],[0," data-ur"]],"start1":4670,"start2":4670,"length1":16,"length2":39}]],"length":8089,"saved":false}
{"ts":1377270315315,"patch":[[{"diffs":[[0,"ckbox\" name=\"img"],[-1,"Src"],[1,"'+idx+'"],[0,"\" value=\"'+data."]],"start1":583,"start2":583,"length1":35,"length2":39},{"diffs":[[0," type=\"checkbox\""],[-1," "],[0,"name=\"imgSrc\" va"]],"start1":860,"start2":860,"length1":33,"length2":32},{"diffs":[[0,"\"img"],[-1,"Src"],[1,"'+idx+'"],[0,"\" va"]],"start1":881,"start2":881,"length1":11,"length2":15}]],"length":8096,"saved":false}
{"ts":1377270317683,"patch":[[{"diffs":[[0,"heckbox\""],[1," "],[0,"name=\"im"]],"start1":868,"start2":868,"length1":16,"length2":17}]],"length":8097,"saved":false}
{"ts":1377270327745,"patch":[[{"diffs":[[0,"ta-i"],[-1,"tem=\"item"],[1,"dx=\""],[0,"<%=i"]],"start1":4689,"start2":4689,"length1":17,"length2":12}]],"length":8092,"saved":false}
{"ts":1377270352731,"patch":[[{"diffs":[[0,"data-url\");\n"],[1,"        var idx = $(this).attr(\"data-idx\");\n"],[0,"        var "]],"start1":120,"start2":120,"length1":24,"length2":68}]],"length":8136,"saved":false}
{"ts":1377336646591,"patch":[[{"diffs":[[0,"ue=\"'+data.image"],[1,"s[0]"],[0,"+'\"><img src=\"'+"]],"start1":942,"start2":942,"length1":32,"length2":36}]],"length":8140,"saved":false}
